= Name =
sxunblur - Micrograph movie alignment: Align micrograph movies with Unblur.

= Usage =

''usage in command line''

sxunblur.py  unblur  input_mrc_micrograph  output --summovie=SUMMOVIE  --selection_list=SELECTION_LIST --nr_threads=NR_THREADS  --nr_frames=nr_frames  --pixel_size=pixel_size  --skip_dose_filter  --exposure_per_frame=exposure_per_frame  --voltage=voltage  --pre_exposure=pre_exposure  --save_frames  --expert_mode  --shift_initial=shift_initial  --shift_radius=shift_radius  --b_factor=b_factor  --fourier_vertical=fourier_vertical  --fourier_horizontal=fourier_horizontal  --shift_threshold=shift_threshold  --iterations=iterations  --dont_restore_noise --verbose

=== Typical usage ===

    sxunblur exists in non-MPI version.

    Perform unblur and with dose filtering and summovie without dose filtering.

    sxunblur.py directory_to_unblur 'directory/prefix*suffix' output_directory
    --summovie=directory_to_summovie
    --nr_frames=25 --pixel_size=1.19 --exposure_per_frame=1.0
    --voltage=300.0 --pre_exposure=0.0 --nr_threads=1

    Perform unblur with dose filtering and summovie without dose filtering with selection list

    sxunblur.py directory_to_unblur 'directory/prefix*suffix' output_directory
    --summovie=directory_to_summovie
    --selection_list=selected_micrograph_file
    --nr_frames=25 --pixel_size=1.19 --exposure_per_frame=1.0
    --voltage=300.0 --pre_exposure=0.0 --nr_threads=1

    Perform unblur without dose filtering.

    sxunblur.py directory_to_unblur 'directory/prefix*suffix' output_directory
    --nr_frames=25 --pixel_size=1.19 --skip_dose_filter --nr_threads=1

    Perform unblur without dose filtering and save the frames.

    sxunblur.py directory_to_unblur 'directory/prefix*suffix' output_directory
    --nr_frames=25 --pixel_size=1.19 --skip_dose_filter --save_frames --nr_threads=1

    Perform unblur with dose filtering and summovie without dose filtering with all options

    sxunblur.py directory_to_unblur 'directory/prefix*suffix' output_directory
    --summovie=directory_to_summovie
    --nr_frames=25 --pixel_size=1.19 --exposure_per_frame=1.0
    --voltage=300.0 --pre_exposure=0.0 --save_frames --expert_mode
    --shift_initial=2.0 --shift_radius=200.0 --b_factor=1500.0
    --fourier_vertical=1 --fourier_horizontal=1 --shift_threshold=0.1
    --iterations=10 --verbose --nr_threads=1


== Input ==

    unblur:: Path to unblur executable: (default required string)
    summovie:: Path to summovie executable: (default none)
    input_mrc_micrograph:: Input micrographs: You can use the wild cards (e.g. *) to specify a list of micrographs. (default required string)
    output:: Output directory: The results will be written here. This directory will be created automatically and it must not exist previously. (default required string)

    selection_list:: Input micrograph list file: Not an unblur option, extension of input micrograph list file must be '.txt'. If this is not provided, all files matched with the micrograph name pattern will be processed. (default none)
    nr_threads:: Number of threads: Not an unblur option, number of threads unblur is allowed to use. The higher the faster, but it also needs a higher amount of memory. (default 1)
    nr_frames:: Number of frames: (default 3)
    pixel_size:: Pixel size [A]: (default  required -1.0)
    exposure_per_frame:: Per frame exposure [e/A^2]: (default 1.0)
    voltage:: Microscope voltage [kV]: (default 300.0)
    pre_exposure:: Pre exposure [e/A^2]: (default 0.0)

    * The remaining parameters are optional.
    save_frames:: Save aligned frames: save aligned frames. This is only neccessary if one wants to perform movie refinement and will slow down the process. (default False)
    skip_dose_filter:: Skip the dose filter step: If yes, exposure per frame, voltage, and pre exposure will be ignored. (default False)
    expert_mode:: Set expert mode: Requires the options initial shift, shift radius, b-factor, fourier_vertical, fourier_horizontal, shift threshold, iterations, restore noise, and verbosity. (default False)
    shift_initial:: *EXPERT* Minimum shift for initial search [A]: (default 2.0)
    shift_radius:: *EXPERT* Outer radius shift limit [A]: (default 200.0)
    b_factor:: *EXPERT* Apply B-factor to images [A^2]: (default 1500.0)
    fourier_vertical:: *EXPERT* Half-width of central vertical line of fourier mask: (default 1)
    fourier_horizontal:: *EXPERT* Half-width of central horizontal line of fourier mask: (default 1)
    shift_threshold:: *EXPERT* Termination shift threshold: (default 0.1)
    iterations:: *EXPERT* Maximum iterations: (default 10)
    dont_restore_noise:: *EXPERT* Do not restore noise power: (default False)
    verbose:: *EXPERT* Verbose: (default False)


== Output ==
The program creates the directory automatically in the chosen output directory.

Without dosefilter:
Sum files will be written to the "corrsum" folder.
Log files will be written to the "logfiles" folder
Aligned frames will be written to the "corrsum" folder.
Shift files  will be written to the "shift" folder.
FRC files will be written to the "frc" folder.

With dosefilter: As without dosefilter plus:
Dose filtered sum files will be written to the "corrsum_dose_filtered" folder.
Log files will be written to the "logfiles" folder
Dose filtered aligned frames will be written to the "corrsum_dose_filtered" folder.
Shift files  will be written to the "shift" folder.
FRC files will be written to the "frc" folder.


= Description =

= Author / Maintainer =
Markus Stabrin

= Keywords =
    category 1:: APPLICATIONS

= Files =
sxunblur.py

= See also =

= Maturity =
No bugs known so far.
